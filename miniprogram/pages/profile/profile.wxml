<!--pages/profile/profile.wxml-->
<view class="container">
  <view class="card" wx:if="{{userInfo}}">
    <view class="profile-header">
      <view class="avatar">{{userInfo.name ? userInfo.name.charAt(0) : 'U'}}</view>
      <view class="user-info">
        <view class="user-name">{{userInfo.name}}</view>
        <view class="user-uid">UID: {{userInfo.uid}}</view>
      </view>
    </view>

    <view class="info-section">
      <view class="info-item">
        <text class="info-label">姓名</text>
        <text class="info-value">{{userInfo.name}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">手机号</text>
        <text class="info-value">{{userInfo.phone || '未设置'}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">角色</text>
        <text class="info-value">{{userInfo.roleKey === 'worker' ? '工人' : userInfo.roleKey}}</text>
      </view>
      <view class="info-item" wx:if="{{userInfo.emergencyContact}}">
        <text class="info-label">紧急联系人</text>
        <text class="info-value">{{userInfo.emergencyContact}}</text>
      </view>
      <view class="info-item" wx:if="{{userInfo.emergencyPhone}}">
        <text class="info-label">紧急联系人电话</text>
        <text class="info-value">{{userInfo.emergencyPhone}}</text>
      </view>
      <view class="info-item">
        <text class="info-label">信息审核状态</text>
        <text class="info-value">
          <text wx:if="{{userInfo.infoAuditStatus === 0}}" style="color: #f59e0b;">待审核</text>
          <text wx:elif="{{userInfo.infoAuditStatus === 1}}" style="color: #4ade80;">已通过</text>
          <text wx:else style="color: #ef4444;">已拒绝</text>
        </text>
      </view>
    </view>

    <view class="button-group">
      <button class="btn-primary" bindtap="logout">退出登录</button>
    </view>
  </view>

  <view class="card" wx:if="{{!userInfo && !loading}}">
    <view class="empty-text">未登录</view>
    <button class="btn-primary" bindtap="goToLogin" style="margin-top: 40rpx;">去登录</button>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>
</view>
