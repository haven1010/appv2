<!--pages/qrcode/qrcode.wxml-->
<view class="page">
  <view class="card">
    <view class="qr-icon">📱</view>
    <view class="title">考勤签到码</view>
    <view class="subtitle">请向现场管理员出示此码</view>

    <view class="qr-box" wx:if="{{!loading && qrImageUrl}}">
      <image class="qr-image" src="{{qrImageUrl}}" mode="aspectFit" />
    </view>

    <view class="qr-box qr-loading" wx:if="{{loading}}">
      <text>生成中…</text>
    </view>

    <view class="qr-box qr-error" wx:if="{{!loading && !qrImageUrl}}">
      <text>加载失败，请刷新</text>
    </view>

    <view class="uid-box">
      <text class="uid-text">{{userInfo.uid}}</text>
      <text class="valid-text">有效期 {{validDuration}}</text>
    </view>

    <button class="btn-refresh" bindtap="refreshQrCode">刷新</button>
  </view>
</view>
