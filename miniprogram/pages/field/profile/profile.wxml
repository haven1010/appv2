<!--pages/field/profile/profile.wxml-->
<view class="page">
  <!-- å¤´éƒ¨ -->
  <view class="profile-header">
    <view class="avatar">{{userInfo.name ? userInfo.name[0] : '?'}}</view>
    <view class="user-name">{{userInfo.name || 'æœªç™»å½•'}}</view>
    <view class="user-tags">
      <text class="tag role-tag">ç°åœºç®¡ç†å‘˜</text>
      <text class="tag uid-tag" wx:if="{{userInfo.uid}}">{{userInfo.uid}}</text>
    </view>
  </view>

  <!-- åŠ è½½ä¸­ -->
  <view class="loading-box" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <block wx:else>
    <!-- å…³è”åŸºåœ° -->
    <view class="info-card">
      <view class="card-title">å…³è”åŸºåœ°</view>
      <view class="card-content" wx:if="{{profileData.assignedBaseId}}">
        <view class="base-row">
          <text class="base-icon">ğŸ“</text>
          <view class="base-info">
            <text class="base-name">{{baseName || 'åŸºåœ°åç§°æœªè·å–'}}</text>
            <text class="base-id">åŸºåœ°ID: {{profileData.assignedBaseId}}</text>
          </view>
        </view>
      </view>
      <view class="card-content empty" wx:else>
        <text class="empty-text">æœªå…³è”åŸºåœ°ï¼Œè¯·è”ç³»ç®¡ç†å‘˜åˆ†é…</text>
      </view>
    </view>

    <!-- ä¸ªäººä¿¡æ¯ -->
    <view class="info-card">
      <view class="card-title">ä¸ªäººä¿¡æ¯</view>
      <view class="info-row">
        <text class="info-label">å§“å</text>
        <text class="info-value">{{profileData.name || userInfo.name || '-'}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">æ‰‹æœºå·</text>
        <text class="info-value">{{profileData.phoneMasked || '-'}}</text>
      </view>
      <view class="info-row">
        <text class="info-label">è§’è‰²</text>
        <text class="info-value">ç°åœºç®¡ç†å‘˜</text>
      </view>
      <view class="info-row" wx:if="{{profileData.regionCode}}">
        <text class="info-label">åœ°åŒºç¼–ç </text>
        <text class="info-value">{{profileData.regionCode}}</text>
      </view>
    </view>

    <!-- åŠŸèƒ½èœå• -->
    <view class="menu-list">
      <view class="menu-item" bindtap="">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“·</text>
          <text class="menu-label">æ‰«ç ç­¾åˆ°</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
      <view class="menu-item" bindtap="">
        <view class="menu-left">
          <text class="menu-icon">ğŸ“‹</text>
          <text class="menu-label">è€ƒå‹¤è®°å½•</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
      <view class="menu-item">
        <view class="menu-left">
          <text class="menu-icon">âš™</text>
          <text class="menu-label">è®¾ç½®</text>
        </view>
        <text class="menu-arrow">â€º</text>
      </view>
    </view>
  </block>

  <!-- é€€å‡ºç™»å½• -->
  <button class="btn-logout" bindtap="logout">é€€å‡ºå½“å‰è´¦å·</button>
</view>
