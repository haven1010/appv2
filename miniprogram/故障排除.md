# 微信小程序故障排除指南

## 问题：app.json 文件内容错误 - 未找到对应的 wxml 文件

### 解决方案

#### 方案1：清除微信开发者工具缓存

1. 关闭微信开发者工具
2. 删除项目目录下的缓存文件：
   - 删除 `.wxapkg` 文件（如果有）
   - 删除 `node_modules` 目录（如果有）
3. 重新打开微信开发者工具并导入项目

#### 方案2：重新编译项目

1. 在微信开发者工具中，点击菜单栏"项目"
2. 选择"重新编译"
3. 或者使用快捷键 `Ctrl + R` (Windows) 或 `Cmd + R` (Mac)

#### 方案3：检查文件路径

确保 `app.json` 中定义的页面路径与实际文件路径完全一致：

```json
{
  "pages": [
    "pages/base/list/list"  // 对应 pages/base/list/list.wxml
  ]
}
```

#### 方案4：检查文件编码

确保所有 `.wxml` 文件使用 UTF-8 编码（无BOM）：

1. 在微信开发者工具中，点击菜单栏"文件"
2. 选择"文件编码"
3. 确保选择"UTF-8"

#### 方案5：手动创建缺失的文件

如果文件确实不存在，可以手动创建：

1. 在微信开发者工具中，右键点击 `pages/base/list` 目录
2. 选择"新建文件"
3. 创建 `list.wxml` 文件
4. 复制以下内容：

```xml
<!--pages/base/list/list.wxml-->
<view class="container">
  <view class="filter-bar">
    <view 
      class="filter-item {{category === 0 ? 'active' : ''}}"
      bindtap="filterByCategory"
      data-category="0"
    >
      全部
    </view>
    <view 
      class="filter-item {{category === 1 ? 'active' : ''}}"
      bindtap="filterByCategory"
      data-category="1"
    >
      水果
    </view>
    <view 
      class="filter-item {{category === 2 ? 'active' : ''}}"
      bindtap="filterByCategory"
      data-category="2"
    >
      蔬菜
    </view>
    <view 
      class="filter-item {{category === 3 ? 'active' : ''}}"
      bindtap="filterByCategory"
      data-category="3"
    >
      其他
    </view>
  </view>

  <view class="base-list" wx:if="{{!loading && bases.length > 0}}">
    <view 
      class="base-item card" 
      wx:for="{{bases}}" 
      wx:key="id"
      bindtap="goToDetail"
      data-id="{{item.id}}"
    >
      <view class="base-name">{{item.baseName}}</view>
      <view class="base-info">
        <text class="base-category">{{item.category === 1 ? '水果' : item.category === 2 ? '蔬菜' : '其他'}}</text>
        <text class="base-address" wx:if="{{item.address}}">{{item.address}}</text>
      </view>
      <view class="base-status">
        <text class="status-text" wx:if="{{item.auditStatus === 1}}">已审核</text>
        <text class="status-text pending" wx:else>待审核</text>
      </view>
    </view>
  </view>

  <view class="empty" wx:if="{{!loading && bases.length === 0}}">
    <text>暂无基地信息</text>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>加载中...</text>
  </view>
</view>
```

#### 方案6：检查文件权限

确保文件有读取权限：

```bash
# 在终端中检查文件权限
ls -la pages/base/list/list.wxml

# 如果权限不对，修改权限
chmod 644 pages/base/list/list.wxml
```

### 常见原因

1. **缓存问题**：微信开发者工具缓存了旧的文件结构
2. **文件编码问题**：文件使用了错误的编码格式
3. **路径问题**：`app.json` 中的路径与实际文件路径不匹配
4. **文件损坏**：文件在传输或编辑过程中损坏

### 验证文件是否存在

在终端中运行以下命令检查文件：

```bash
cd miniprogram
find pages -name "*.wxml" | sort
```

应该看到所有 `.wxml` 文件，包括：
- `pages/base/list/list.wxml`
- `pages/base/detail/detail.wxml`
- 等等...

### 如果问题仍然存在

1. 尝试删除 `project.config.json` 中的 `editorSetting` 字段
2. 尝试使用"项目" -> "清除文件缓存"
3. 尝试重新导入项目
4. 检查微信开发者工具版本，确保是最新版本
