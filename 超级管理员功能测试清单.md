# 超级管理员功能测试清单

使用账号 **系统总管理员李**（手机号 `13811138000`，密码/身份证后6位 `011234`）登录管理端，按下列项逐项测试。

---

## 一、登录与入口

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 1.1 | 登录 | ✅ 已实现 | 打开 http://localhost:3000/login，输入手机号 13811138000、密码 011234，点击「立即登录」 | 跳转到 /dashboard，侧栏显示：概览、基地管理、招聘管理、考勤管理、薪资结算、人员管理 |
| 1.2 | 仅管理员可见菜单 | ✅ 已实现 | 登录后查看左侧菜单 | 六项菜单均可见且可点击进入 |

---

## 二、概览

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 2.1 | 数据概览页 | ⚠️ 静态 | 点击「概览」 | 进入 Dashboard，展示活跃工人、合作基地、本月发放工资、今日签到等卡片及图表（当前为静态 mock 数据，未接真实统计接口） |

---

## 三、基地管理（权限逻辑说明）

**计划书逻辑**：基地管理员提交入驻申请 → 超级管理员审核。  
- **超级管理员**：进入基地管理后默认看到「审核中」Tab，可切换「全部基地」查看全部；可对待审核基地进行「通过核验」/「驳回」；**不显示**「申请入驻」按钮。  
- **基地管理员 / 区域管理员**：可点击「申请入驻」提交新基地（待超级管理员审核）；可查看「全部基地」列表（无「审核中」Tab）。

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 3.1 | 全部基地列表 | ✅ 已实现 | 超级管理员点击「基地管理」后点击「全部基地」Tab | 列表由 GET /api/base 拉取；有数据则展示基地卡片，无数据则提示「暂无基地数据」 |
| 3.2 | 审核中 Tab（超管默认） | ✅ 已实现 | 超级管理员点击「基地管理」 | 默认显示「审核中」Tab，仅展示 auditStatus=待审核 的基地；N 为待审核数量 |
| 3.3 | 通过/驳回审核 | ✅ 已实现 | 在「审核中」列表任一行点击「通过核验」或「驳回」 | 调用 PATCH /api/base/:id/audit，成功后列表刷新，并提示「已通过核验」或「已驳回」 |
| 3.4 | 申请入驻（仅基地/区域管理员） | ✅ 已实现 | 使用**基地管理员**或**区域管理员**账号登录，在基地管理页点击「申请入驻」 | 弹出创建基地表单；填写后提交调用 POST /api/base，成功后待超级管理员审核；超级管理员账号**不显示**「申请入驻」按钮 |
| 3.5 | 基地详情与岗位 | ✅ 已实现 | 在「全部基地」某卡片点击「运营档案」或右侧箭头 | 右侧抽屉展示基地详情（GET /api/base/:id）、招聘岗位列表（GET /api/base/:id/jobs） |
| 3.6 | 发布招聘岗位 | ✅ 已实现 | 在基地详情抽屉中点击「发布招聘」 | 弹出岗位表单；填写岗位名称、薪资类型、人数、时薪/计件单价、工作内容、要求等后提交，调用 POST /api/base/:id/jobs，成功后岗位列表刷新 |
| 3.7 | 岗位下架 | ✅ 已实现 | 在基地详情抽屉某条招聘中岗位点击「下架」 | 调用 PATCH /api/base/jobs/:jobId/status body { status: 0 }，成功后该岗位不再显示为招聘中 |
| 3.8 | 岗位续期 | ✅ 已实现 | 在基地详情抽屉某条岗位点击「续期」 | 调用 PATCH /api/base/jobs/:jobId/renew，成功后提示「已续期」并刷新列表 |
| 3.9 | 即将过期岗位(3天) | ✅ 已实现 | 在基地管理页点击「即将过期(3天)」按钮 | 弹出列表，由 GET /api/base/jobs/expiring?days=3 拉取；有则展示岗位名称，无则提示「暂无」 |
| 3.10 | 批量下架过期岗位 | ✅ 已实现 | 在基地管理页点击「批量下架过期岗位」 | 调用 POST /api/base/jobs/deactivate-expired，成功后提示「已批量下架过期岗位」并刷新基地/岗位数据 |

---

## 四、考勤管理

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 4.1 | 考勤管理页入口 | ✅ 已实现 | 点击「考勤管理」 | 进入 AttendanceManagement 页面，展示现场签到相关 UI（扫码、列表等） |
| 4.2 | 扫码签到业务 | ⚠️ 模拟 | 在考勤页点击「开始扫描」等 | 当前为前端模拟流程；真实签到需对接 POST /api/attendance/checkin、GET /api/attendance/qrcode 等（后端接口已存在） |

---

## 五、薪资结算

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 5.1 | 薪资结算页入口 | ✅ 已实现 | 点击「薪资结算」 | 进入 PayrollView，展示工资结算相关卡片与操作按钮 |
| 5.2 | 结算数据与发起 | ⚠️ 静态 | 查看页面按钮与统计 | 当前为静态展示；真实结算需对接后端 salary 模块接口（如有） |

---

## 六、人员管理

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 6.1 | 人员管理页入口 | ✅ 已实现 | 点击「人员管理」 | 进入 WorkerManagement，展示采摘工档案、录入流程等 UI |
| 6.2 | 人员录入/注册 | ⚠️ 模拟 | 点击「添加人员」等，按步骤操作 | 当前为前端模拟（如模拟 OCR）；真实录入需对接 POST /api/user/register 或 register/ocr、register/complete 等（后端接口已存在） |

---

## 七、招聘管理

| 序号 | 功能 | 实现状态 | 测试步骤 | 预期结果 |
|------|------|----------|----------|----------|
| 7.1 | 招聘管理页入口 | ✅ 已实现 | 点击「招聘管理」 | 进入 JobManagement，展示岗位列表、候选人等（当前为 mock 数据） |
| 7.2 | 岗位与候选人数据 | ⚠️ 静态 | 查看岗位列表、点击某岗位查看候选人 | 数据为前端 mock；真实数据可在「基地管理 → 基地详情 → 招聘岗位」中查看/发布（已对接 GET/POST /api/base/:id/jobs） |

---

## 八、其他（计划书提及、当前实现情况）

| 功能 | 实现状态 | 说明 |
|------|----------|------|
| 基地合作申请（提交） | ✅ 后端已实现 | 仅 SUPER_ADMIN / REGION_ADMIN 可调用 POST /api/base/cooperation；前端未单独页面，可用 Swagger 测试 |
| 审核基地合作申请 | ✅ 后端已实现 | PATCH /api/base/cooperation/:id/review；前端未单独页面 |
| 权限/用户管理（RBAC 配置） | ❌ 未实现 | 计划书「管理权限与用户」无独立配置页 |
| 操作日志 | ❌ 未实现 | 计划书「操作日志记录」未在前后端体现 |
| 任务分配 | ❌ 未实现 | 计划书「任务分配」无独立模块 |

---

## 九、测试前准备

1. **后端**：在 `app/backend` 下执行 `npm run start:dev`，确保 http://localhost:3001/docs 可访问。
2. **前端**：在 `app/frontend` 下执行 `npm run dev`，确保 http://localhost:3000 可访问。
3. **数据库**：已创建 `pickpass_db` 并导入 `picking_pass_db_final.sql`，且存在用户「系统总管理员李」（手机 13811138000，身份证后6位 011234）。

---

## 十、快速自测顺序（建议）

1. 登录 → 检查六项菜单均能进入。  
2. 基地管理 → 全部基地列表 → 申请入驻 → 创建一条基地 → 审核中 Tab → 通过/驳回。  
3. 基地管理 → 某基地「运营档案」→ 详情抽屉 → 发布招聘 → 下架/续期。  
4. 基地管理 → 「即将过期(3天)」「批量下架过期岗位」各点一次，看接口是否正常。  
5. 考勤管理、薪资结算、人员管理、招聘管理 → 各进入一次，确认页面正常、无报错。

按上述清单逐项打勾即可完成超级管理员功能测试；若某一项与预期不符，可结合浏览器控制台与后端日志排查。
