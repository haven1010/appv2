# 采摘工管理系统项目计划书
## 已完成内容与接口汇总
### （一）App 端（管理端）已完成功能
- 登录与权限入口：登录页、注册入口已完成，按角色进入不同管理视图。
- 数据看板：系统概览、统计卡片、趋势视图已完成（DashboardView、FieldDashboard）。
- 人员管理：工人档案管理、详情查看与基础信息维护已完成（WorkerManagement、worker/WorkerView）。
- 基地管理：基地信息维护、基地入驻审核流程已完成（BaseManagement、AuditCenter）。
- 招聘管理：岗位发布、岗位详情、候选人列表与审核已完成（JobManagement）。
- 签到与考勤：签到记录查询、按基地维度统计已完成（AttendanceManagement）。
- 薪资管理：工资统计、发放记录与确认流转已完成（PayrollView）。
- 现场管理：现场人员列表与统计视图已完成（FieldWorkers）。
- 系统设置与审计：操作日志、系统设置已完成（OperationLogView、SystemSettings）。

### （二）小程序端已完成功能
- 登录与注册：手机/身份证尾号登录、注册信息录入、资料完善。
- 角色化导航：自定义 TabBar，采摘工与现场管理员显示不同导航。
- 采摘工首页：基地推荐、岗位列表、报名状态提醒。
- 基地与岗位：基地列表/详情、岗位列表/详情、报名申请。
- 我的报名：报名列表、报名状态、待发放工资提示。
- 签到码：个人签到二维码生成与展示。
- 个人中心：个人资料、考勤记录、工资统计与确认、退出登录。
- 现场管理员：工作台（基地信息/考勤概况）、扫码签到、考勤记录、个人主页。

### （三）已实现接口（小程序端对接）
- 认证与用户：`/auth/login`、`/user/register`、`/user/profile`（GET/PATCH）。
- 基地与岗位：`/base`、`/base/{id}`、`/base/{id}/jobs`、`/base/jobs/{jobId}`、`/base/jobs/{jobId}/apply`、`/base/applications/me`。
- 推荐：`/recommendation/bases`。
- 考勤与签到：`/attendance/qrcode`、`/attendance/checkin`、`/attendance/records`、`/attendance/stats`、`/attendance/worker/records`。
- 薪资：`/salary/worker/stats`、`/salary/worker/pending`、`/salary/{id}/worker-confirm`、`/salary/worker/{id}/confirm`。
## 一、用户信息管理模块
### （一）信息录入流程
- 设计统一数据模板，核心字段包含姓名、身份证号、联系方式、紧急联系人等。
- 提供三种录入方式：扫码录入（扫描个人身份证）、拍照录入（拍摄身份证照片后OCR识别）、分步引导（简单问题引导填写，降低操作门槛）。
- 首次录入后系统自动校验数据完整性，符合要求后存入主数据库。

### （二）信息复用机制
- 首次录入后生成唯一识别码(UID)，后续报名可直接调用已有信息。
- 支持用户自主更新信息（如手机号变更），并设置审核流程。

### （三）数据安全保障
- 敏感信息加密存储，采用AES256加密算法。
- 建立数据备份机制，每日自动备份。

## 二、权限与角色管理
### （一）角色定义
- 超级管理员：系统总控，可查看所有数据，管理权限与用户，负责人员管理、任务分配及辖区内基地信息查看。
- 现场管理员：负责现场签到与人员统计，协助数据录入与整理。
- 基地管理员：负责基地入驻申请、资质维护、招聘信息发布及候选人筛选。
- 基地区域管理员：负责区域内人员管理、任务分配及辖区内基地信息查看。

### （二）权限分配
- 采用RBAC权限模型，不同角色可配置不同功能模块访问权限。
- 操作日志记录，可追溯权限变更与数据操作。

## 三、报名与签到流程
### （一）报名流程
- 用户通过小程序/公众号报名，选择参与日期、工种及目标基地（关联基地模块）。
- 报名成功后系统自动生成个人专属二维码，包含活动信息、UID及所选基地信息。
- 系统发送报名确认短信，包含签到二维码链接。

### （二）现场签到流程
- 管理人员使用移动终端（平板/手机）扫描用户二维码。
- 系统自动匹配用户信息、所选基地信息，标记签到状态。
- 签到数据实时同步至云端，支持离线签到。
- 签到界面显示已签到、未到、未注册人员分类列表，同时关联基地维度统计。

### （三）异常处理
- 未注册用户：弹出注册界面，支持现场拍照/OCR录入。
- 信息不全用户：提示补充信息，完成后才能签到。
- 签到数据异常：自动标记并提醒管理员复核。

## 四、工资结算流程
### （一）工时记录
- 现场管理人员记录实际工作时长与完成量，关联对应基地信息。
- 支持分段记录（如上午/下午分开记录）。

### （二）工资计算
- 根据工种单价、工时、完成量自动计算，可关联基地设定的薪资标准。
- 支持固定工资、计件工资等多种计算方式。
- 系统自动校验计算结果，避免异常数据。

### （三）工资发放
- 生成工资确认单，工人签字确认。
- 支持线下现金发放与线上转账两种方式。
- 发放记录拍照存档，系统生成发放凭证，同步至对应基地档案。

### （四）特殊情况处理
- 代报名人员：支持一人替最多两人报名，需填写被代报人完整信息。
- 无智能手机人员：提供现场报名通道，由管理人员协助完成，可同步选择基地。

## 五、基地模块
### （一）功能规划
1. 基地信息展示
- 展示基地核心信息：营业资质（营业执照扫描件）、环境照片（产区、办公区、住宿区等）、联系方式（电话、地址、联系人）、经营类别（水果采摘、蔬菜采摘等）。
- 支持多维度筛选：按经营类别（水果、蔬菜、其他）、所在地区（省-市-区）、招聘状态（正在招聘/暂不招聘）筛选，方便用户快速定位。
2. 招聘信息发布
- 基地管理员可发布详细招聘内容：岗位名称、招聘要求（年龄、体力、经验等）、招聘人数、工作周期、薪资标准（固定/计件/时薪）、工作内容、福利保障（食宿、交通补贴等）。
- 支持图文并茂展示：可上传工作场景视频、产区实景图，提升信息吸引力。
- 招聘信息设置有效期，到期自动下架或提醒续期。
3. 双向选择机制
- 基地管理员可根据用工需求，向符合条件的（基地区域管理员/超级管理员）提交合作申请（含所需工种、人数、周期等）。
- （基地区域管理员/超级管理员）收到申请后，可查看申请详情及对应候选人池（关联用户信息模块），筛选匹配候选人并回复（同意合作/拒绝并说明原因）。
4. 资源整合与推荐
- 系统采集互动数据：用户浏览记录、申请记录、基地招聘响应率、合作成功率等。
- 智能推荐逻辑：向用户推荐匹配其求职偏好（地区、工种、薪资）的基地及招聘岗位；向基地推荐符合招聘要求的用户。
- 提供合作机会对接：针对优质基地与高频用户，推送长期合作意向，搭建稳定用工渠道。

### （二）交互流程
1. 基地入驻
- 基地提交入驻申请：填写基地基本信息（名称、地址、类别）、上传资质材料（营业执照、行业备案证明等）。
- 超级管理员审核：在3个工作日内完成资质核验，审核通过/驳回并反馈原因。
- 开通专属板块：审核通过后，系统为基地分配专属管理后台与展示页面，生成基地唯一标识ID。
2. 招聘发布
- 基地管理员登录后台，填写招聘详情（岗位、要求、薪资等），设置筛选条件（年龄区间、工作经验等）。
- 系统自动校验招聘信息完整性，发布后同步至小程序/公众号展示页面。
- 智能匹配推送：系统根据招聘条件，从用户数据库中筛选潜在候选人，向其发送招聘通知。
3. 用户申请
- 用户浏览基地展示页面及招聘信息，查看基地详情与评价。
- 选择意向岗位，提交申请（可关联个人UID，自动填充基础信息）。
- 用户可在个人中心查看申请进度，接收基地面试安排、录用结果等反馈。
4. 资源对接
- 系统持续统计双方互动数据，优化推荐算法，精准推送资源。
- 提供线下对接支持：展示基地地址导航、联系对接人，协助双方沟通面谈。
- 记录合作案例：对成功合作的基地与用户，形成合作档案，为后续推荐提供参考。

### （三）数据安全保障
- 基地资质材料、敏感联系方式采用AES256加密存储。
- 招聘信息、申请记录实时备份，防止数据丢失。
- 严格控制基地信息访问权限，仅授权角色可查看完整资质与联系方式。

## 六、系统扩展与接口设计
### （一）接口预留
- 车辆信息接口：未来可对接包车管理系统。
- 考勤设备接口：支持对接打卡机、定位设备。
- 财务系统接口：可与现有财务系统数据互通。
- 基地相关接口：预留地图接口（对接高德/百度地图，实现基地定位与导航）、招聘平台接口（可选对接第三方招聘渠道，扩展招聘范围）。
- 评价系统接口：未来可新增用户对基地的评价接口，完善基地口碑体系。

### （二）多终端支持
- 小程序端：用户报名、信息查询、基地浏览、岗位申请。
- 管理端：后台管理、数据统计、基地入驻审核、权限配置。
- 移动管理端：现场签到、任务管理、基地信息查看。
- 基地管理端：入驻申请、招聘发布、候选人筛选、反馈处理。